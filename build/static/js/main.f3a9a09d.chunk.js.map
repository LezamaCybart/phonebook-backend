{"version":3,"sources":["components/AddPersonForm.js","components/Filter.js","services/persons.js","components/Persons.js","App.js","index.js"],"names":["PersonForm","addPerson","newName","handlePersonChange","newNumber","handleNumberChange","console","log","onSubmit","value","onChange","type","Filter","newFilter","handleFilterChange","baseUrl","newObject","axios","post","then","response","data","id","put","delete","Persons","personsToShow","deletePersonFromState","map","person","name","number","onClick","personService","deletedPerson","Notification","message","success","succesStyle","color","background","fontSize","boderStyle","borderRadius","padding","marginBottom","errorStyle","style","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","setMessage","useEffect","get","length","filter","includes","event","target","preventDefault","names","personObject","window","confirm","contact","updatedPersons","returnedPerson","setTimeout","catch","error","concat","hand","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f3a9a09d.chunk.js","sourcesContent":["import React from \"react\";\n\n\nconst PersonForm = ({ addPerson, newName, handlePersonChange, newNumber, handleNumberChange }) => {\n    console.log(\"personform\")\n    return (\n        <form onSubmit={addPerson}>\n            <div>\n                name: <input value={newName} onChange={handlePersonChange} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Filter = ({newFilter, handleFilterChange}) => {\n    return (\n        <div>\n            filter shown with:<input value={newFilter} onChange={handleFilterChange} />\n        </div>\n    )\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => { \n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => { \n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => { \n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => { \n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => {\n        console.log(response)\n        return(\n            response.data\n        )\n    })\n}\n\nexport default { getAll, create, update, deletePerson }\n","import React from \"react\";\nimport personService from '../services/persons'\n\nconst Persons = ({ personsToShow, deletePersonFromState }) => {\n\n    const firstTry = (id) => {\n        personService\n            .deletePerson(id)\n            .then(deletedPerson => { \n                deletePersonFromState(id)\n                console.log(id + \"deleted\")\n            })\n            \n        console.log(id + \"to deleted\")\n    }\n\n    return (\n        <ul>\n            {personsToShow.map((person) => (\n                <li key={person.id}>{person.name} {person.number}\n                    <button onClick={() => firstTry(person.id)}>\n                        erase\n                    </button>\n                </li>\n            ))}\n        </ul>\n    )\n}\n\nexport default Persons\n","import React, { useState, useEffect } from \"react\";\nimport axios from 'axios'\nimport PersonForm from \"./components/AddPersonForm\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\"\n\nconst Notification = ({ message, success }) => {\n  //const message = props[0]\n  //const succes = props[1]\n  console.log(\"notification\" + message + success)\n  //console.log(\"notification\" + props)\n\n  const succesStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: '20px',\n    boderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px'\n  }\n\n  const errorStyle = {\n    ...succesStyle,\n    color: 'red',\n  }\n\n  if (message === null) {\n    return null\n  }\n  if (success) {\n    return (\n      <div style={succesStyle}>\n        {message}\n      </div>\n    )\n\n  } else {\n    return (\n      <div style={errorStyle}>\n        {message}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [message, setMessage] = useState({ message: null, success: true })\n\n  /*\n  useEffect(() => { \n      console.log('useEffect')\n      personService\n          .getAll()\n          .then(initialPersons => { \n              console.log(initialPersons)\n              setPersons(initialPersons)\n          })\n          \n  }, [])\n  */\n\n  useEffect(() => {\n    console.log('useEffect')\n    axios\n      .get('/api/persons')\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const names = persons.map(person => person.name)\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      //id: persons.length + 1\n    };\n\n\n    if (names.includes(personObject.name)) {\n      if (window.confirm(\"Change number of existing contact?\")) {\n        const contact = persons.filter(person => person.name === personObject.name);\n        const updatedPersons = persons.map(person => (person.name === contact[0].name) ? personObject : person)\n\n        console.log(updatedPersons)\n\n        personService\n          .update(contact[0].id, personObject)\n          .then(returnedPerson => {\n            setMessage({ message: `Updated ${personObject.name} information`, success: true })\n            setPersons(updatedPersons);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setTimeout(() => {\n              setMessage({ message: null, success: true })\n            }, 5000)\n          })\n          .catch(error => {\n            setMessage({ message: `${personObject.name} was already deleted from server`, success: false })\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setPersons(persons.filter(person => person.name !== personObject.name))\n          })\n      }\n\n      //window.alert(`{newName} is already added to phonebook`)\n    } else {\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setMessage({ message: `Added ${personObject.name}`, success: true })\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setTimeout(() => {\n            setMessage({ message: null, success: \"\" })\n          }, 5000)\n        })\n        .catch(error => {\n          if (error.response.data.error === \"name must be at least 3 char long and number must be at leas 8 long\") {\n            setMessage({ message: `name must have at least 3 char long and number must be at least 8 charactes long`, success: false })\n          }\n          console.log(error.response.data)\n        })\n    }\n\n  };\n\n  const deletePersonFromState = (id) => {\n    setPersons(persons.filter(person => person.id !== id))\n  }\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n    //setMessage()\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n\n  const personsToShow = persons.filter(person => person.name.includes(newFilter))\n\n  //<Persons personsToShow={personsToShow} deletePersonFromState={deletePersonFromState}/>\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message.message} success={message.success} />\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      <h2>add a new</h2>\n      <PersonForm addPerson={addPerson} newName={newName} handlePersonChange={handlePersonChange} newNumber={newNumber} handleNumberChange={handleNumberChange} hand />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deletePersonFromState={deletePersonFromState} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App  />,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}